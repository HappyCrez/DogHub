-- =========================================================
-- ТЕСТОВЫЕ ДАННЫЕ ДЛЯ КЛУБА
-- =========================================================

-- -----------------------------------------
-- 1. Члены клуба (member)
-- -----------------------------------------
INSERT INTO "member"
  ("full_name",          "phone",              "email",                          "city",
   "avatar_url",         "bio",                "join_date",     "membership_end_date", "role")
VALUES
  ('Иван Петров',        '+7-900-111-11-11',   'ivan.petrov@example.com',        'Москва',
   NULL,                 'Владелец двух активных собак',
   '2023-01-10',         NULL,                 'Пользователь'),

  ('Мария Смирнова',     '+7-900-222-22-22',   'maria.smirnova@example.com',     'Санкт-Петербург',
   NULL,                 'Любит участвовать в соревнованиях с собакой',
   '2022-05-15',         '2024-05-14',         'Пользователь'),

  ('Андрей Кузнецов',    '+7-900-333-33-33',   'andrey.kuznetsov@example.com',   'Москва',
   NULL,                 'Инструктор по дрессировке',
   '2021-09-01',         NULL,                 'Тренер'),

  ('Администратор Клуба','+7-900-444-44-44',   'admin@example.com',              'Москва',
   'https://example.com/avatars/admin.png',
   'Администратор клуба',
   NULL,                 NULL,                 'Админ');

-- Предполагаем: member.id = 1..4 в порядке вставки


-- -----------------------------------------
-- 2. Заявки (application)
-- Покрываем все статусы: IN_PROGRESS, APPROVED, REJECTED
-- -----------------------------------------
INSERT INTO "application"
  ("submitted_at",           "contract_date",          "contract_number",
   "status",        "member_id")
VALUES
  ('2023-01-05 10:00:00',    '2023-01-10 12:00:00',    'CNT-0001',
   'APPROVED',      1),

  ('2022-05-10 09:15:00',    NULL,                     NULL,
   'REJECTED',      2),

  ('2021-08-25 14:30:00',    NULL,                     NULL,
   'IN_PROGRESS',   3),

  -- у одного человека может быть несколько заявок
  ('2024-02-01 11:00:00',    '2024-02-05 15:00:00',    'CNT-0002',
   'APPROVED',      2);


-- -----------------------------------------
-- 3. Собаки (dog)
-- Покрываем оба пола, разные комбинации заполненности полей
-- -----------------------------------------
INSERT INTO "dog"
  ("member_id", "name",   "breed",               "sex", "birth_date",
   "chip_number",  "photo",                               "bio",                          "tags")
VALUES
  (1, 'Рекс',    'Немецкая овчарка',            'M',   '2019-03-10',
   'CHIP-0001',  NULL,
   'Энергичный пёс, хорошо подходит для охраны.',
   ARRAY['активный','послушный']),

  (1, 'Луна',    'Бордер-колли',                'F',   '2021-07-01',
   'CHIP-0002',  'https://example.com/dogs/luna.jpg',
   'Очень умная и игривая собака, любит фрисби.',
   ARRAY['щенок','фрисби','обучаемая']),

  (2, 'Боня',    'Лабрадор-ретривер',           'F',   '2018-11-20',
   NULL,         NULL,
   'Спокойная семейная собака.',
   ARRAY['семейная','добрая']),

  (2, 'Тор',     'Сибирский хаски',             'M',   NULL,
   'CHIP-0003',  NULL,
   'Обожает бег и холодную погоду.',
   NULL);

-- Предполагаем: dog.id = 1..4 в порядке вставки


-- -----------------------------------------
-- 4. Типы услуг для собак (service_type)
-- -----------------------------------------
INSERT INTO "service_type" ("name")
VALUES
  ('Груминг'),
  ('Ветеринарный осмотр'),
  ('Индивидуальная дрессировка'),
  ('Групповая дрессировка'),
  ('Няня для собак');

-- service_type.id = 1..5


-- -----------------------------------------
-- 5. Программы (program)
-- Покрываем оба типа: PERSONAL, GROUP
-- -----------------------------------------
INSERT INTO "program"
  ("title",                            "type",     "price",     "description")
VALUES
  ('Базовый курс послушания',          'GROUP',    15000.00,
   'Групповой курс для собак любого возраста. Работа над базовыми командами и социализацией.'),

  ('Индивидуальные занятия с кинологом','PERSONAL', 3000.00,
   'Персональные занятия для решения конкретных проблем в поведении.'),

  ('Щенячий детский сад',              'GROUP',    12000.00,
   'Групповые занятия для щенков до 8 месяцев.');

-- program.id = 1..3


-- -----------------------------------------
-- 6. События (event)
-- Разные категории, платные/бесплатные, с/без end_at
-- -----------------------------------------
INSERT INTO "event"
  ("title",                        "category", "start_at",              "end_at",
   "venue",                        "price",     "description")
VALUES
  ('День открытых дверей клуба',   'MEETUP',
   '2023-04-01 11:00:00',          '2023-04-01 15:00:00',
   'Клуб, главный зал',            0.00,
   'Знакомство с клубом, тренерами и программами. Бесплатное мероприятие.'),

  ('Соревнования по аджилити',     'SPORT',
   '2023-05-20 10:00:00',          '2023-05-20 18:00:00',
   'Стадион "Парк Собаки"',        2500.00,
   'Соревнования по аджилити с призами.'),

  ('Благотворительный марш с собаками','CHARITY',
   '2023-06-10 12:00:00',          NULL,
   'Центральный парк',             1000.00,
   'Сбор средств в поддержку приютов для собак.');

-- event.id = 1..3


-- -----------------------------------------
-- 7. Типы оплат (payment_type)
-- -----------------------------------------
INSERT INTO "payment_type" ("name")
VALUES
  ('Наличные'),
  ('Банковская карта'),
  ('Онлайн-оплата');

-- payment_type.id = 1..3


-- -----------------------------------------
-- 8. Услуги собак (dog_service)
-- Покрываем все статусы: REQUESTED, SCHEDULED, DONE, CANCELED
-- -----------------------------------------
INSERT INTO "dog_service"
  ("dog_id", "service_type_id", "requested_at",          "performed_at",
   "price",    "status",      "service_name")
VALUES
  -- Выполненная услуга (DONE)
  (1, 1, '2023-02-01 10:00:00', '2023-02-02 12:00:00',
   1500.00, 'DONE',      'Комплексный груминг'),

  -- Запланированная услуга (SCHEDULED)
  (1, 3, '2023-02-10 09:00:00', NULL,
   2500.00, 'SCHEDULED', 'Индивидуальное занятие по послушанию'),

  -- Только запрос (REQUESTED), без цены
  (2, 2, '2023-03-01 11:30:00', NULL,
   NULL,   'REQUESTED', 'Первичный ветеринарный осмотр'),

  -- Отмена услуги (CANCELED)
  (3, 5, '2023-03-15 08:45:00', '2023-03-16 09:00:00',
   2000.00, 'CANCELED', 'Няня для собаки на день'),

  -- Ещё один DONE без service_name (проверка NULL)
  (4, 4, '2023-04-05 13:00:00', '2023-04-05 15:00:00',
   1800.00, 'DONE',      NULL);


-- -----------------------------------------
-- 9. Сессии программ (program_session)
-- Разные duration_min / attendance, иногда NULL
-- -----------------------------------------
INSERT INTO "program_session"
  ("program_id", "session_datetime",      "duration_min", "attendance",
   "location",         "description")
VALUES
  -- Базовый курс послушания (GROUP, id=1)
  (1, '2023-03-01 19:00:00', 90,   8,
   'Манеж №1',
   'Первое занятие, знакомство, базовые команды.'),

  (1, '2023-03-05 19:00:00', 90,   10,
   'Манеж №1',
   'Продолжение базовых команд и работа в группе.'),

  (1, '2023-03-10 19:00:00', 90,   NULL,
   'Манеж №2',
   'Занятие с отработкой навыков на улице (attendance пока не отмечен).'),

  -- Индивидуальные занятия (PERSONAL, id=2)
  (2, '2023-03-02 14:00:00', 60,   1,
   'Персональный зал №1',
   'Индивидуальное занятие с Рексом.'),

  (2, '2023-03-09 14:00:00', NULL, 1,
   'Персональный зал №1',
   'Индивидуальное занятие без заранее заданной длительности.'),

  -- Щенячий детский сад (GROUP, id=3)
  (3, '2023-04-01 10:00:00', 60,   5,
   'Манеж №3',
   'Группа щенков, социализация и игры.');


-- -----------------------------------------
-- 10. Регистрация на программы (program_registration)
-- У программы может быть несколько собак, а собака может ходить в разные программы.
-- Уникальный индекс (program_id, dog_id) соблюдаем.
-- -----------------------------------------
INSERT INTO "program_registration"
  ("program_id", "dog_id", "registered_at")
VALUES
  -- Базовый курс послушания
  (1, 1, '2023-02-20 10:00:00'),   -- Рекс
  (1, 3, '2023-02-22 11:00:00'),   -- Боня

  -- Индивидуальные занятия
  (2, 1, '2023-02-25 09:30:00'),   -- Рекс

  -- Щенячий детский сад
  (3, 2, '2023-03-15 12:00:00'),   -- Луна
  (3, 4, '2023-03-16 13:00:00'),   -- Тор

  -- Собака может быть и в групповой, и в индивидуальной программе
  (2, 2, '2023-03-20 16:00:00');   -- Луна


-- -----------------------------------------
-- 11. Регистрация на события (event_registration)
-- Покрываем все комбинации:
--   1) только member_id
--   2) только dog_id
--   3) и member_id, и dog_id
-- Уникальный индекс (event_id, dog_id, member_id) соблюдаем.
-- -----------------------------------------
INSERT INTO "event_registration"
  ("event_id", "member_id", "dog_id", "registered_at")
VALUES
  -- День открытых дверей: человек без собаки
  (1, 1, NULL, '2023-03-25 10:00:00'),

  -- То же событие, другой человек, тоже без собаки
  (1, 2, NULL, '2023-03-26 09:30:00'),

  -- Соревнования по аджилити: только собака (например, зарегистрирована через тренера)
  (2, NULL, 1, '2023-05-01 08:00:00'),

  -- Соревнования: и человек, и собака (отдельная запись)
  (2, 1, 1, '2023-05-01 08:10:00'),

  -- Благотворительный марш: член + другая собака
  (3, 2, 3, '2023-05-20 12:30:00');


-- -----------------------------------------
-- 12. Оплаты (payment)
-- Разные типы оплат, с/без receipt_number
-- -----------------------------------------
INSERT INTO "payment"
  ("member_id", "payment_type_id", "paid_at",
   "receipt_number",   "amount")
VALUES
  -- Оплата груминга наличными
  (1, 1, '2023-02-02 12:05:00',
   'RCPT-0001',        1500.00),

  -- Оплата индивидуального занятия картой
  (1, 2, '2023-02-10 09:10:00',
   'RCPT-0002',        2500.00),

  -- Взнос за участие в соревнованиях онлайн
  (2, 3, '2023-05-05 10:15:00',
   'RCPT-0003',        2500.00),

  -- Продление членства, без указания номера чека (NULL)
  (2, 1, '2023-04-30 18:00:00',
   NULL,               8000.00),

  -- Оплата программы "Щенячий детский сад" картой
  (2, 2, '2023-03-15 12:05:00',
   'RCPT-0004',        12000.00),

  -- Оплата за услуги няни онлайн
  (3, 3, '2023-03-16 09:05:00',
   'RCPT-0005',        2000.00);